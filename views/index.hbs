<!-- search bar -->
<div class='container search-bar'>
	<div class='search-bar-outer'>
		<div class='search-bar-inner'>
			<h4 class='mb-2'>尋找餐廳：</h4>
			<form action='/search'>
				<div
					class='d-flex flex-column flex-sm-row align-items-sm-center gap-2 justify-content-between'
				>
					<div class='input-group mb-2 mb-sm-0 mr-sm-2 form-outline w-50'>
						<input
							type='text'
							name='keyword'
							class='form-control'
							placeholder='輸入餐廳、分類'
							aria-label='Restaurant Name...'
							aria-describedby='button-addon2'
							value='{{keyword}}'
						/>
						<button class='btn btn-major' type='submit' id='search-button'><i
								class='fas fa-search'
							></i></button>
					</div>

					<div class="dropdown">
            <button class="btn btn-major ml-1 dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown"
              aria-expanded="false">
               Sort By
            </button>
            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
              <li><a class="dropdown-item" href="/sort/nameAsc">A → Z</a></li>
              <li><a class="dropdown-item" href="/sort/nameDesc">Z → A</a></li>
              <li><a class="dropdown-item" href="/sort/category">Category</a></li>
              <li><a class="dropdown-item" href="/sort/location">Location</a></li>
              <li><a class="dropdown-item" href="/sort/ratingDesc">Rating high → low</a></li>
							<li><a class="dropdown-item" href="/sort/ratingAsc">Rating low → high</a></li>
            </ul>
          </div>					
				</div>
			</form>
		</div>
	</div>
</div>
<!-- restaurant list -->
<div class='container mt-5'>
	<div class='row'>
		<div class='col-md-10 col-12 mx-auto'>
			{{#if restaurants}}
				<div class='row row-cols-1 row-cols-sm-3'>
					{{#each restaurants}}
						<div class='col'>
							<div class='card mb-3'>
								<img
									class='card-img-top'
									src='{{this.image}}'
									alt='{{this.name}}'
								/>
								<div class='card-body p-3'>
									<h6 class='card-title mb-1'>{{this.name}}</h6>

									<div class='restaurant-category mb-1'>
										<i class='fas fa-utensils pr-2'></i>
										{{this.category}}
									</div>

									<span
										class='badge badge-pill badge-danger font-weight-normal'
									>
										{{this.rating}}
										<i class='fas fa-star fa-xs'></i>
									</span>

								</div>
								<div class='card-footer d-flex justify-content-end flex-wrap'>
									<a href='/restaurants/{{this._id}}/edit'><button
											class='btn btn-success btn-sm'
										>Edit</button></a>
									<a href='/restaurants/{{this._id}}'><button
											class='btn btn-info btn-sm'
										>Detail</button></a>
									<form
										id="delete-form"
										action='/restaurants/{{this._id}}?_method=DELETE'
										method='post'
									>
										<button
											type='button'
											class='btn btn-danger btn-sm text-white'
											data-bs-toggle="modal" data-bs-target="#deleteModal"
										>Delete</button>
									</form>
								</div>
							</div>
						</div>
					{{/each}}
				</div>			
			{{/if}}
		</div>
	</div>
</div>